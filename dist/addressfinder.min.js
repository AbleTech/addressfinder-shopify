!function(e){var n={au:{iso:"AU",title:"Australia",provinces:{ACT:"Australian Capital Territory",NSW:"New South Wales",NT:"Northern Territory",QLD:"Queensland",SA:"South Australia",TAS:"Tasmania",VIC:"Victoria",WA:"Western Australia"},fieldAPIMappngs:{address_1:{name:"address_line_1",type:"field"},address_2:{name:"address_line_2",type:"field"},city:{name:"locality_name",type:"field"},postcode:{name:"postcode",type:"field"},state:{name:"state_territory",type:"field"}}},nz:{iso:"NZ",title:"New Zealand",provinces:{"Auckland Region":"Auckland","Bay of Plenty Region":"Bay of Plenty","Canterbury Region":"Canterbury","Gisborne Region":"Gisborne","Hawke’s Bay Region":"Hawke’s Bay","Manawatu-Wanganui Region":"Manawatu-Wanganui","Marlborough Region":"Marlborough","Nelson Region":"Nelson","Northland Region":"Northland","Otago Region":"Otago","Southland Region":"Southland","Taranaki Region":"Taranaki","Tasman Region":"Tasman","Waikato Region":"Waikato","Wellington Region":"Wellington","West Coast Region":"West Coast"},fieldAPIMappngs:{address_1:{name:"address_line_1_and_2",type:"function"},address_2:{name:"suburb",type:"function"},city:{name:"city",type:"function"},postcode:{name:"postcode",type:"function"},state:{name:"region",type:"field"}}}};e.AF?e.AF.CountryMappings=n:e.AF={CountryMappings:n}}(window),function(e){function n(){function e(e){return i[e]}function n(n,i){void 0===i&&(i=r.currentForm);var t="";return i.prefix&&(t+=i.prefix),t+=e(n),i.suffix&&(t+=i.suffix),t}function o(){var e={};for(var t in i)e[t]=n(t);return e}var r=this;return r.currentForm=null,r.setForm=function(e){return r.currentForm=t[e],r.currentForm.name=e,r.currentForm.fields=o(),r.currentForm},r.findMatchingForm=function(){var e=Object.keys(i)[0];for(var o in t){var a=n(e,t[o]);if(document.getElementById(a)){r.setForm(o);break}}return!!r.currentForm},r.init=function(){r.findMatchingForm()},r}var i={address_1:"address1",address_2:"address2",city:"city",state:"province",country:"country",postcode:"zip"},t={billing_plus:{type:"billing",platform:"plus",prefix:"checkout_billing_address_attributes_"},shipping_plus:{type:"shipping",platform:"plus",prefix:"checkout_shipping_address_attributes_"},billing_standard:{type:"billing",platform:"standard",prefix:"checkout_billing_address_"},shipping_standard:{type:"shipping",platform:"standard",prefix:"checkout_shipping_address_"},shipping_registration:{type:"shipping",platform:"registration",prefix:"address_",suffix:"_new"}};e.AF?e.AF.FormFieldMappings=n:e.AF={FormFieldMappings:n}}(window),function(e,n){function i(i){n.console.log("in traditionalLoad");var t=e.createElement("script");t.src="https://api.addressfinder.io/assets/v3/widget.js",t.async=1,void 0!==i&&(t.onload=i),e.body.appendChild(t)}function t(e){n.console.log("in requireLoad");var i=n.require.config({context:"af",baseUrl:"",paths:{addressfinder:"https://api.addressfinder.io/assets/v3/core",reqwest:"https://files-abletech-nz.s3.amazonaws.com/addressfinder/reqwest",neat_complete:"https://files-abletech-nz.s3.amazonaws.com/addressfinder/neat-complete"}});n.console.log("af",i),i(n.require(["addressfinder"],function(i){void 0!==e&&e(i),n.console.log("AddressFinder",i)}))}function o(e){n.define&&n.define.amd&&"function"==typeof n.define?t(e):i(e)}function r(){return window.AF&&window.AF.Widget}function a(){return this.loadScript=function(e){r()?e():o(e)},this}n.AF?n.AF.ScriptLoader=a:n.AF={ScriptLoader:a}}(document,window),function(e){function n(){function n(n,t){Object.keys(i.country.fieldAPIMappngs).forEach(function(n){if(e.console.log("field",n),"NZ"==i.country.iso&&"function"==n.type)return void e.console.log("use AF formatting functions");e.console.log("use AF API Mapping in metaData: ",t)})}var i=this;return i.create=function(){i.instance=new e.AddressFinder.Widget(i.field,i.AFKey,i.country),i.instance.on("results:select",n)},i.init=function(n,t,o){n&&(i.field=n),i.AFKey=t||e.AddressFinderPlugin.key,o&&(i.country=e.AF.CountryMappings[o]),e.AddressFinder&&e.AddressFinder.Widget&&i.create()},i}e.AF?e.AF.ShopifyWidget=n:e.AF={ShopifyWidget:n}}(window),function(e,n){!function(){function e(e){function i(e){n.console.log("iso",e);var i=new n.AF.ShopifyWidget;i.init(Object.keys(o.fields)[0],"AFKeyValue",e),r.push(i)}n.console.log("event",e);var t=new n.AF.FormFieldMappings;t.init();var o=t.currentForm;n.console.log(Object.keys(o.fields)[0]);var r=[];Object.keys(n.AF.CountryMappings).forEach(i)}(new n.AF.ScriptLoader).loadScript(e)}()}(document,window);