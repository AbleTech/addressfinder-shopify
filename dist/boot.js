!function(e,n){function i(){function i(){Object.keys(n.AF.CountryMappings.list).forEach(t)}function t(e){if(d.countryElement.querySelector('[value="'+e.toUpperCase()+'"]')||d.countryElement.querySelector('[value="'+n.AF.CountryMappings.list[e].title+'"]')){var i=new n.AF.ShopifyWidget,t=d.activeAddressGroup.fields[Object.keys(d.activeAddressGroup.fields)[0]].element();i.init(t,e.toUpperCase()),d.widgets.push(i)}}function r(e,i){Object.keys(d.activeAddressGroup.fields).forEach(function(t){var r=d.activeAddressGroup.fields[t],o=d.activeWidget.country.fieldAPIMappings[r.mappingId];if("NZ"==d.activeWidget.country.iso&&"function"==o.type){var a=new n.AddressFinder.NZSelectedAddress(e,i);r.setValue(a[o.name]())}else if("lookup"==o.type){var s=n.AF.CountryMappings.findProvinceValueByAPI(d.activeWidget.country.iso,i[o.name]),u=null;s&&s.forEach(function(e){if(r.element().querySelector('[value="'+e+'"]'))return void(u=e)}),r.setValue(u)}else r.setValue(i[o.name])})}function o(){d.widgets.forEach(function(e){e.instance.on("result:select",r)})}function a(){Object.keys(d.activeAddressGroup.fields).forEach(function(e){d.activeAddressGroup.fields[e].setValue()})}function s(e){var i=n.AF.CountryMappings.findCountryISOByValue(e);d.activeCountryISO=i,d.activeWidget=null,d.widgets.forEach(function(e){e.setStateByCountry(i)&&(d.activeWidget=e)})}function u(e){var n=e.target.value;n!=d.activeCountryISO&&(d.activeWidget&&a(),s(n))}var d=this;return d.activeAddressGroup=null,d.countryElement=null,d.activeCountryISO=null,d.activeWidget=null,d.widgets=[],d.init=function(n){d.activeAddressGroup=n,d.countryElement=e.querySelector(d.activeAddressGroup.countryField),d.activeAddressGroup&&d.activeAddressGroup.fields&&d.countryElement&&(i(),d.countryElement.addEventListener("change",u),s(d.countryElement.value),o())},d}n.AF?n.AF.AddressGroup=i:n.AF={AddressGroup:i}}(document,window),function(e){var n={list:{au:{iso:"AU",title:"Australia",provinceAPIMappings:{ACT:["Australian Capital Territory","ACT"],NSW:["New South Wales","NSW"],NT:["Northern Territory","NT"],QLD:["Queensland","QLD"],SA:["South Australia","SA"],TAS:["Tasmania","TAS"],VIC:["Victoria","VIC"],WA:["Western Australia","WA"],OT:[null]},fieldAPIMappings:{address1:{name:"address_line_1",type:"field"},address2:{name:"address_line_2",type:"field"},city:{name:"locality_name",type:"field"},province:{name:"state_territory",type:"lookup"},zip:{name:"postcode",type:"field"}}},nz:{iso:"NZ",title:"New Zealand",provinceAPIMappings:{"Auckland Region":["Auckland","AUK"],"Bay of Plenty Region":["Bay of Plenty","BOP"],"Canterbury Region":["Canterbury","CAN"],"Gisborne Region":["Gisborne","GIS"],"Hawke's Bay Region":["Hawke's Bay","HKB"],"Manawatu-Wanganui Region":["Manawatu-Wanganui","MWT"],"Marlborough Region":["Marlborough","MBH"],"Nelson Region":["Nelson","NSN"],"Northland Region":["Northland","NTL"],"Otago Region":["Otago","OTA"],"Southland Region":["Southland","STL"],"Taranaki Region":["Taranaki","TKI"],"Tasman Region":["Tasman","TAS"],"Waikato Region":["Waikato","WKO"],"Wellington Region":["Wellington","WGN"],"West Coast Region":["West Coast","WTC"],"Other Region":[null]},fieldAPIMappings:{address1:{name:"address_line_1_and_2",type:"function"},address2:{name:"suburb",type:"function"},city:{name:"city",type:"function"},province:{name:"region",type:"lookup"},zip:{name:"postcode",type:"function"}}}},findProvinceFieldValueAlias:function(e,n){return this.list[e.toLowerCase()].provinceFieldAliases[n]},findProvinceValueByAPI:function(e,n){return this.list[e.toLowerCase()].provinceAPIMappings[n]},findMappingByValue:function(e){var n=this.list,i=n[e.toLowerCase()];return i||Object.keys(n).forEach(function(t){var r=n[t];r.title.toUpperCase()==e.toUpperCase()&&(i=r)}),i},findCountryAttributeByValue:function(e,n){var i=this.findMappingByValue(n);return i?i[e]:n},findCountryISOByValue:function(e){return this.findCountryAttributeByValue("iso",e)}};e.AF?e.AF.CountryMappings=n:e.AF={CountryMappings:n}}(window),function(e){function n(e,n){var i=this;return i.mappingId=n,i.selector=e,i.element=function(){return document.querySelector(i.selector)},i.setValue=function(e){void 0===e&&(e=""),i.element().value=e},i}e.AF?e.AF.FormField=n:e.AF={FormField:n}}(window),function(e){function n(){function n(e,n){var t="";return t+=r.prefix,n.prefix&&(t+=n.prefix),t+="country"===e?"country":i[e],n.suffix&&(t+=n.suffix),t+=r.suffix}function o(){var t={};return i.forEach(function(i,r){var o=n(r,a.activeMapping),s=new e.AF.FormField(o,i);t[o]=s}),t}var a=this;return a.activeMapping=null,a.findAddressGroups=function(){var e=[];return t.forEach(function(i,r){a.activeMapping=t[r];var s=n(0,a.activeMapping);document.querySelector(s)&&(a.activeMapping.countryField="select"+n("country",a.activeMapping),a.activeMapping.fields=o(),e.push(a.activeMapping))}),e},a}var i=["address1","address2","city","province","zip"],t=[{prefix:"checkout[billing_address][",suffix:"]"},{prefix:"checkout[shipping_address][",suffix:"]"},{suffix:"_billing"},{suffix:"_shipping"},{prefix:"address[",suffix:"]"}],r={prefix:'[name="',suffix:'"]:not(.visually-hidden)'};e.AF?e.AF.FormFieldMappings=n:e.AF={FormFieldMappings:n}}(window),function(e,n){function i(n){var i=e.createElement("script");i.src="https://api.addressfinder.io/assets/v3/widget.js",i.async=1,void 0!==n&&(i.onload=n),e.body.appendChild(i)}function t(){return window.AF&&window.AF.Widget}function r(){return this.loadScript=function(e){t()?e():i(e)},this}n.AF?n.AF.ScriptLoader=r:n.AF={ScriptLoader:r}}(document,window),function(e){function n(){function n(){i.instance=new e.AddressFinder.Widget(i.field,i.AFKey,i.country.iso,i.options)}var i=this;i.AFKey=null,i.field=null,i.country=null,i.instance=null,i.options=null,i.setStateByCountry=function(e){var n=i.country.iso==e;return n?i.instance.enable():i.instance.disable(),n};var t=function(n){var i="";switch(n){case"NZ":i=e.AddressFinderPlugin.nzWidgetOptions||e.AddressFinderPlugin.widgetOptions;break;case"AU":i=e.AddressFinderPlugin.auWidgetOptions||e.AddressFinderPlugin.widgetOptions}return i};return i.init=function(r,o){i.AFKey=e.AddressFinderPlugin.key,i.options=t(o),r&&(i.field=r),o&&(i.country=e.AF.CountryMappings.findMappingByValue(o)),e.AddressFinder&&e.AddressFinder.Widget&&n()},i}e.AF?e.AF.ShopifyWidget=n:e.AF={ShopifyWidget:n}}(window),function(e){function n(n){e.console&&e.console.warn&&e.console.warn(n)}function i(){var n=new e.AF.FormFieldMappings,i=n.findAddressGroups();i.forEach(function(n,t){var r=new e.AF.AddressGroup;n.fields&&(r.init(n),i[t]=r)})}function t(){var t=!1;[{objName:"AddressFinderPlugin",message:"No AddressFinder Key specified. See: https://addressfinder.nz/docs/shopify/"},{objName:"AddressFinder",message:"The AddressFinder Widget Script failed to load."},{objName:"AF",message:"One or more of the AF Shopify script packages are not loaded."}].forEach(function(i){if(!e[i.objName])return n(i.message),void(t=!0)}),t||i()}(new e.AF.ScriptLoader).loadScript(t)}(window);